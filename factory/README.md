# 工厂模式

## 如何解耦复杂对象的创建和使用

简单工厂模式和工厂方法模式比较简单，在实际的项目开发中常用；抽象工厂模式的原理比较复杂，在实际项目开发中，并不常用，简单了解。

### 简单工厂模式

Go 语言，没有类、构造函数，通常使用`type`定义接口等类型，`NewX` 进行初始化，封装一些实现细节。

`NewX` 函数返回接口类型时，就时简单工厂模式，但每次调用`NewRuleConfigParser`都会创建一个新的 `Parser`，应当复用并缓存，见 `RuleConfigParserFactory`.

### 工厂方法模式

工厂方法模式，使用子类的方式，延迟生成对象到子类中实现。

Go 语言中不存在继承，所以使用匿名组合的方式实现。

### 抽象工厂模式

抽象工厂模式，用于生成产品族的工厂，所生成的对象是有关联性的。如果抽象工厂退化成生成的对象无关联性，则成为工厂方法模式。

如例子中使用 `RDB`, `XML` 存储订单信息，抽象工厂分别能生成相关的主订单信息和订单详情信息。如果业务逻辑中，需要替换使用，则只需要改动工厂方法相关的类，就能替换使用不同的存储方式了。
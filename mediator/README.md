# 中介模式(Mediator Pattern)

中介模式定义了一个单独的中介对象，来封装一组对象间的交互，将这组对象间的交互，委派给与中介对象交互，来避免对象间的直接交互。

中介模式通过引入中介这个中间层，将一组对象间的交互关系或依赖关系，从多对多或网状关系，转换为一对多或层状关系，从而最小化对象间的交互关系。

中介者模式封装对象之间交互，使依赖变的简单，并且使复杂交互简单化，封装在中介者中，但可能会产生大而复杂的中介类。

例子中的中介者使用单例模式生成中介者，中介者的change使用switch判断类型。

经典的例子：航空管制，引入`塔台`这样一个中介，除了降低交互的复杂性以外，还起到了`协调`的作用。

## 应用场景

1. 即时通信系统(IM系统)
2. 移动消息系统(Push系统)
3. 顺序控制：利用中介类，先后调用不同参与者的方法

用户或设备会先将消息发送给服务器，再通过服务器将消息推送给目标用户或设备。发送消息的用户或设备，与目标用户或设备并不直接交互。

## 对比

在中介模式中，所有的参与者都只与中介进行交互。观察者模式中的消息队列有点类似中介模式中的`中介`，观察者模式中的观察者和被观察者有点类似中介模式中的`参与者`.

在观察者模式中，一个参与者可以是观察者，又可以是被观察者，但大部分情况下，交互关系是单向的，一个参与者要么是观察者，要么是被观察者，不会同步兼具两种身份。而中介模式正好相反。